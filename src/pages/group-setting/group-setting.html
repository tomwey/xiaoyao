<!--
  Generated template for the GroupSettingPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="wechat">
    <ion-title>详情</ion-title>
    <ion-buttons end *ngIf="ability.banranking == '0'">
      <button ion-button (click)="rank();">
        排行
      </button>
    </ion-buttons>
  </ion-navbar>

</ion-header>

<ion-content>
  <ion-list>
    <ion-card><ion-item class="members-item">
      <ion-grid>
        <ion-row>
          <ion-col col-2 *ngFor="let item of friends" [class.fuqunzhu]="item.roletype == '2'" [class.qunzhu]="(item.friendid || item.uid || item.id) === group.master_id">
              <img [src]="item.headurl" tappable (click)="clickItem(item);">
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item></ion-card>
    <ion-card>
      <ion-item tappable (click)="openMemebers();">
      全部群成员({{(group.data || []).length}})
      <img item-right class="arrow" src="assets/imgs/icon_arrow.png">
    </ion-item>
  </ion-card>
  </ion-list>
  <ion-list>
    <ion-card *ngIf="ability.bangameseting == '0'">
      <ion-item tappable (click)="openGameSetting();">
      群游戏设置
      <img item-right class="arrow" src="assets/imgs/icon_arrow.png">
    </ion-item>
    </ion-card>
    <ion-card *ngIf="isMaster"><ion-item tappable (click)="openGroupJiang()">
      群奖
      <ion-note style="color:red;" item-right>已产出: 0</ion-note>
      <img item-right class="arrow" src="assets/imgs/icon_arrow.png">
    </ion-item></ion-card>
  </ion-list>
  <ion-list>
    <ion-card *ngIf="ability.baninviteconfim == '0'">
      <ion-item tappable (click)="openInviteConfirm();">
        邀请确认
        <img item-right class="arrow" src="assets/imgs/icon_arrow.png">
      </ion-item>
    </ion-card>
    <ion-card *ngIf="isMaster">
      <ion-item tappable (click)="openAbility();">
      权限管理
      <img item-right class="arrow" src="assets/imgs/icon_arrow.png">
      </ion-item>
    </ion-card>
    <ion-card *ngIf="ability.baninvitelog == '0'">
      <ion-item tappable (click)="openInviteLog();">
      邀请日志
      <img item-right class="arrow" src="assets/imgs/icon_arrow.png">
      </ion-item>
    </ion-card>
    <ion-card>
      <ion-item tappable (click)="updateNickname();">
      群昵称
      <ion-note item-right>{{group.name}}</ion-note>
      <img item-right class="arrow" src="assets/imgs/icon_arrow.png">

      </ion-item></ion-card>
    <ion-card><ion-item tappable (click)="updateNotice();">
      群公告
      <ion-note item-right>{{group.notice || '未设置'}}</ion-note>
      <img item-right class="arrow" src="assets/imgs/icon_arrow.png">

    </ion-item></ion-card>
  </ion-list>
  <ion-list>
      <ion-card><ion-item>
      <ion-label>消息提示</ion-label>
      <ion-toggle [(ngModel)]="config.tips" (ionChange)="changeChatConfig('tips');"></ion-toggle>
    </ion-item></ion-card>
    <!-- <ion-card><ion-item>
      <ion-label>离线推送</ion-label>
      <ion-toggle [(ngModel)]="config.pushoffline" (ionChange)="changeChatConfig('pushoffline');"></ion-toggle>
    </ion-item></ion-card> -->
    <ion-card><ion-item>
      <ion-label>消息置顶</ion-label>
      <ion-toggle [(ngModel)]="config.topmsg" (ionChange)="changeChatConfig('topmsg');"></ion-toggle>
    </ion-item></ion-card>
  </ion-list>
  <ion-list>
    <ion-card><ion-item tappable (click)="removeMsg();">
      删除聊天记录
      <img item-right class="arrow" src="assets/imgs/icon_arrow.png">
    </ion-item></ion-card>
  </ion-list>
  <div padding><button ion-button block (click)="rebackGroup();">退出该群</button></div>
</ion-content>
